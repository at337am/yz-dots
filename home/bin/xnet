#!/usr/bin/env bash

# -=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=-
# 脚本用途：
# 该脚本用于测试从 Cloudflare 下载速度。
# 功能说明：
# 1. 使用 wget 下载指定大小（默认 50MB）的数据文件。
# 2. 下载内容不保存，只用于测速（输出到 /dev/null）。
# 3. 下载过程中在终端显示进度信息。
# 4. 完成后输出提示信息“Done”。
# -=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=-

if ! command -v "wget" &> /dev/null; then
    printf "Error: Missing dependency: wget\n" >&2
    exit 1
fi

bytes=$((50 * 1024 * 1024))

printf "\033[34mCloudflare speed test...\033[0m\n"

url="https://speed.cloudflare.com/__down?bytes=${bytes}"

wget -O /dev/null "${url}"

printf "Done.\n"
