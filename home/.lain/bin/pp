#!/usr/bin/env bash

# -=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=-
# 脚本用途: 设置壁纸
# -=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=--=-=-

set -euo pipefail

# 定义颜色
RED='\033[0;31m'        # 红色
GREEN='\033[0;32m'      # 绿色
NC='\033[0m'            # 重置色

# 依赖检查
if ! command -v "swww" &> /dev/null; then
    printf "${RED}Error:${NC} Missing dependency: swww\n" >&2
    exit 1
fi

if [[ "$#" -ne 1 ]]; then
    printf "${RED}Error:${NC} Invalid argument.\n" >&2
    printf "Usage: %s <image>\n" "$(basename "$0")" >&2
    exit 1
fi

IMG_PATH="$1"

if [[ ! -f "$IMG_PATH" ]]; then
    printf "${RED}Error:${NC} %s does not exist.\n" "$IMG_PATH" >&2
    exit 1
fi

swww img "$IMG_PATH" --transition-type none

# 开启动画效果
# swww img "$IMG_PATH" --transition-type any --transition-angle 60 --transition-step 90

printf "${GREEN}Wallpaper has been changed to: %s${NC}\n" "$IMG_PATH"
